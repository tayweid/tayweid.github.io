<!DOCTYPE html>

<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    
<title>Microeconomics | Part A</title>

<link rel="stylesheet" href="part-clean.css">

</head>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100&family=Source+Serif+Pro:wght@100&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100&display=swap" rel="stylesheet">

<body>

<div class="wrapper">
<div class="left_div">
    <nav>
        <ul>
            <span>MICRO</span>
            <span>-ECON</span>
            <hr style="width: 80%; margin: 20px 0 10px auto;">
            <li style="margin: 0;"><a class="btn" href="Syllabus.pdf" target="_blank">Syllabus</a></li>
            <hr style="width: 80%; margin: 10px 0 10px auto;">
            <li><a class="active" href="">Part A</a></li>
            <li><a href="https://tayweid.github.io/econ-0100/part-b">Part B</a></li>
            <li><a href="https://tayweid.github.io/econ-0100/part-c">Part C</a></li>
            <li><a href="https://tayweid.github.io/econ-0100/part-d">Part D</a></li>
            <li><a href="https://tayweid.github.io/econ-0100/part-e">Part E</a></li>
            <li><a href="https://tayweid.github.io/econ-0100/part-f">Part F</a></li>
        </ul>
    </nav>
</div>

<div class="content">
    
    <div class="description">
        <h1 class="title"> Part A // The Landscape of Economics</h1>        
        <p>
            Part A begins with a big question. What should we choose when we can't have everything? Even the richest people in the world can't have everything they might want. Our wants exceed our resources. So how should we as individuals and groups go about making choices? 
        </p>
        <p>
            When we view the cost of a choice as the value of our next best option, we can make everyone better off simultaneously. To show this, we'll build a model of opportunity cost, the production possibility frontier (PPF), and comparative advantage, asking: "Where on the PPF should we live?"
        </p>
        <p>
            This question is where economic thinking began and makes up many of the puzzles at the heart of how we organize society. And it's exactly where we're headed in this course.
        </p>
        <p>
            Start Part A by skimming the reading to understand the main ideas. Then do the practice material, using the text for help when needed to stay focused and get unstuck quickly.
        </p>
        <p>
            The homework gives you unlimited tries to practice each topic. Each section has its own questions that you'll turn in before the MiniExam on Gradescope. You can check your work instantly before submitting your final answer on Gradescope.
        </p>
    </div>

    <!-- CAROUSEL -->
    <div class="carousel-container" id="part-a1">
        <h1 class="subtitle">Block A1 ~ What is microeconomics?</h1>
        <div class="carousel-indicator">
            <div class="indicator-track">
                <button class="indicator-tab active" data-index="0">Episode</button>
                <button class="indicator-tab" data-index="1">Reading</button>
                <button class="indicator-tab" data-index="2">Vignette</button>
                <button class="indicator-tab" data-index="3">Homework</button>
                <div class="indicator-slider"></div>
            </div>
        </div>
        <div class="carousel">
            <button class="carousel-arrow carousel-arrow-left" aria-label="Previous">
                <span>‚Äπ</span>
            </button>
            <div class="carousel-track">
                <div class="carousel-card" data-video-id="qMDU1QYKYss">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/qMDU1QYKYss/maxresdefault.jpg" alt="Episode A0 thumbnail">
                        <div class="play-button">‚ñ∂</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Episode A1</h3>
                        <p class="card-description">What is microeconomics?</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="uwYCeUVcx4E">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/uwYCeUVcx4E/maxresdefault.jpg" alt="Chapter 1 AI Summary thumbnail">
                        <div class="play-button">üéß</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Chapter 1 ( <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">The principles of microeconomics</p>
                    </div>
                </div>
                
                <div class="carousel-card placeholder">
                    <div class="card-video">
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Vignette A1</h3>
                        <p class="card-description">No vignette in this block</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="Homework/HW_A1.pdf">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/default/maxresdefault.jpg" alt="Homework thumbnail" style="background: var(--main-md-color);">
                        <div class="play-button">üìö</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Homework A1 ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Due: Sunday September 4</p>
                    </div>
                </div>
            </div>
            <button class="carousel-arrow carousel-arrow-right" aria-label="Next">
                <span>‚Ä∫</span>
            </button>
        </div>
    </div>


    <!-- ADDITIONAL CAROUSELS -->
    <div class="carousel-container" id="part-a2">
        <h1 class="subtitle">Block A2 ~ The production possibility frontier</h1>
        <div class="carousel-indicator">
            <div class="indicator-track">
                <button class="indicator-tab active" data-index="0">Episode</button>
                <button class="indicator-tab" data-index="1">Reading</button>
                <button class="indicator-tab" data-index="2">Vignette</button>
                <button class="indicator-tab" data-index="3">Homework</button>
                <div class="indicator-slider"></div>
            </div>
        </div>
        <div class="carousel">
            <button class="carousel-arrow carousel-arrow-left" aria-label="Previous">
                <span>‚Äπ</span>
            </button>
            <div class="carousel-track">
                <div class="carousel-card" data-video-id="po4kip5m_QY">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/po4kip5m_QY/maxresdefault.jpg" alt="Episode A1 thumbnail">
                        <div class="play-button">‚ñ∂</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Episode A2</h3>
                        <p class="card-description">The landscape of what's possible</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="uwYCeUVcx4E">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/uwYCeUVcx4E/maxresdefault.jpg" alt="Chapter 2 AI Summary thumbnail">
                        <div class="play-button">üéß</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Chapter 2 ( <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Thinking like an economist</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="Vignettes/Vignette_A2.pdf">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/default/maxresdefault.jpg" alt="Vignette thumbnail" style="background: var(--main-md-color);">
                        <div class="play-button">üìù</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Vignette A2 ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">PPF practice problems</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="Demos/Demo_A.pdf">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/default/maxresdefault.jpg" alt="Extra Practice thumbnail" style="background: var(--main-md-color);">
                        <div class="play-button">üìö</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Homework A2 ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Due: Sunday September 4</p>
                    </div>
                </div>
            </div>
            <button class="carousel-arrow carousel-arrow-right" aria-label="Next">
                <span>‚Ä∫</span>
            </button>
        </div>
    </div>

    <div class="carousel-container" id="part-a3">
        <h1 class="subtitle">Block A3 ~ Comparative advantage and specialization</h1>
        <div class="carousel-indicator">
            <div class="indicator-track">
                <button class="indicator-tab active" data-index="0">Episode</button>
                <button class="indicator-tab" data-index="1">Reading</button>
                <button class="indicator-tab" data-index="2">Vignette</button>
                <button class="indicator-tab" data-index="3">Homework</button>
                <div class="indicator-slider"></div>
            </div>
        </div>
        <div class="carousel">
            <button class="carousel-arrow carousel-arrow-left" aria-label="Previous">
                <span>‚Äπ</span>
            </button>
            <div class="carousel-track">
                <div class="carousel-card" data-video-id="nclNGfY-3eA">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/nclNGfY-3eA/maxresdefault.jpg" alt="Episode A3 thumbnail">
                        <div class="play-button">‚ñ∂</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Episode A3</h3>
                        <p class="card-description">Specialization</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="uwYCeUVcx4E">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/uwYCeUVcx4E/maxresdefault.jpg" alt="Chapter 3 AI Summary thumbnail">
                        <div class="play-button">üéß</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Chapter 3 ( <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Gains from trade</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="Vignettes/Vignette_A3.pdf">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/default/maxresdefault.jpg" alt="Vignette thumbnail" style="background: var(--main-md-color);">
                        <div class="play-button">üìù</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Vignette A3 ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Specialization practice problems</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="Demos/Demo_A.pdf">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/default/maxresdefault.jpg" alt="Extra Practice thumbnail" style="background: var(--main-md-color);">
                        <div class="play-button">üìö</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Homework A3 ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Due: Sunday September 4</p>
                    </div>
                </div>
            </div>
            <button class="carousel-arrow carousel-arrow-right" aria-label="Next">
                <span>‚Ä∫</span>
            </button>
        </div>
    </div>

    <div class="carousel-container" id="part-a4">
        <h1 class="subtitle">Block A4 ~ Trade</h1>
        <div class="carousel-indicator">
            <div class="indicator-track">
                <button class="indicator-tab active" data-index="0">Episode</button>
                <button class="indicator-tab" data-index="1">Reading</button>
                <button class="indicator-tab" data-index="2">Vignette</button>
                <button class="indicator-tab" data-index="3">Homework</button>
                <div class="indicator-slider"></div>
            </div>
        </div>
        <div class="carousel">
            <button class="carousel-arrow carousel-arrow-left" aria-label="Previous">
                <span>‚Äπ</span>
            </button>
            <div class="carousel-track">
                <div class="carousel-card" data-video-id="v_s4dO1AD5Y">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/v_s4dO1AD5Y/maxresdefault.jpg" alt="Episode A4 thumbnail">
                        <div class="play-button">‚ñ∂</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Episode A4</h3>
                        <p class="card-description">Trade</p>
                    </div>
                </div>
                
                <div class="carousel-card placeholder">
                    <div class="card-video">
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Chapter 4</h3>
                        <p class="card-description">No reading in this block</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="Vignettes/Vignette_A4.pdf">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/default/maxresdefault.jpg" alt="Vignette thumbnail" style="background: var(--main-md-color);">
                        <div class="play-button">üìù</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Vignette A4 ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Trade practice problems</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="Demos/Demo_A.pdf">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/default/maxresdefault.jpg" alt="Extra Practice thumbnail" style="background: var(--main-md-color);">
                        <div class="play-button">üìö</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Homework A4 ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Due: Sunday September 4</p>
                    </div>
                </div>
            </div>
            <button class="carousel-arrow carousel-arrow-right" aria-label="Next">
                <span>‚Ä∫</span>
            </button>
        </div>
    </div>

    <!-- RECITATIONS -->

    <div class="carousel-container" id="recitations">
        <h1 class="subtitle">Recitations</h1>
        <div class="carousel-indicator">
            <div class="indicator-track">
                <button class="indicator-tab active" data-index="0">Vignette A1r</button>
                <div class="indicator-slider"></div>
            </div>
        </div>
        <div class="carousel">
            <button class="carousel-arrow carousel-arrow-left" aria-label="Previous">
                <span>‚Äπ</span>
            </button>
            <div class="carousel-track">
                <div class="carousel-card" data-video-id="Vignettes/Vignette_A1.pdf">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/default/maxresdefault.jpg" alt="Vignette A1 thumbnail" style="background: var(--main-md-color);">
                        <div class="play-button">üìù</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Vignette A1r ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Vignette A1r is an extended Vignette we examine in Recitation.</p>
                    </div>
                </div>
            </div>
            <button class="carousel-arrow carousel-arrow-right" aria-label="Next">
                <span>‚Ä∫</span>
            </button>
        </div>
    </div>

    <!-- MINIEXAM -->

    <div id="miniexam">
        <h1 class="subtitle" id="miniexam">MiniExam</h1>
        <p>
            MiniExam A will be held on <i>Wednesday September 11th</i> and covers everything in Part A. You will begin to learn that if you understand the concepts and do the work in the Vignettes, Homework, and Demo, you're going to be in good shape on the MiniExam.
        </p>
        <p>
            Demos are a resource for you to use as you'd like. But my advice is to start by trying to solve it on your own and only then use the video and solutions to check your work. You're more than welcome to watch this video first, but you're not going to catch your weak points as easily, which is the main point.
        </p>

        <div class="carousel-card standalone-card">
            <div class="card-video">
                <iframe width="100%" height="100%" src="https://www.youtube.com/embed/KH0MkPxWsig?si=YvIIr5Jl7bwF3Zn3" frameborder="0" allowfullscreen></iframe>
            </div>
            <div class="card-content">
                <h3 class="card-title">Demo A ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                <p class="card-description">Demo A is very similar to what you'll see on MiniExam A.</p>
            </div>
        </div>
    </div>

    <div style="margin-bottom:50%"></div>

    </div>

    <!-- RIGHT NAVIGATION -->
    <div class="right_div">
        <nav>
            <ul>
                <span>Contents</span>
                <hr style="width: 80%; margin: 20px 0 10px 0;">
                <li style="margin: 0;"><a href="#part-a1" class="active" style="font-size: 20px;">A1 | Econ</a></li>
                <li><a href="#part-a2" style="font-size: 20px;">A2 | PPF</a></li>
                <li><a href="#part-a3" style="font-size: 20px;">A3 | Specialization</a></li>
                <li><a href="#part-a4" style="font-size: 20px;">A4 | Trade</a></li>
                <li><a href="#recitations" style="font-size: 20px;">Recitations</a></li>
                <li><a href="#miniexam" style="font-size: 20px;">MiniExam</a></li>
            </ul>
        </nav>
    </div>
</div> <!-- Close wrapper -->

</body>
</html>

<script type="text/javascript" src="part.js"></script>

<script>
// Carousel functionality for multiple carousels
document.addEventListener('DOMContentLoaded', function() {
    const carousels = document.querySelectorAll('.carousel');
    
    // Get responsive card width
    const getCardWidth = () => {
        if (window.innerWidth <= 1000) {
            return window.innerWidth - 20; // Mobile: full width minus padding
        }
        return Math.min(840, window.innerWidth * 0.9 + 40); // Desktop: responsive width + gap
    };
    
    carousels.forEach(carousel => {
        const container = carousel.closest('.carousel-container');
        const track = carousel.querySelector('.carousel-track');
        const leftArrow = carousel.querySelector('.carousel-arrow-left');
        const rightArrow = carousel.querySelector('.carousel-arrow-right');
        const cards = carousel.querySelectorAll('.carousel-card');
        
        // Helper function to center a card without page jumps
        const centerCard = (targetCard, behavior = 'smooth') => {
            if (!targetCard) return;
            
            if (window.innerWidth <= 1000) {
                // Mobile: just scroll to the card without centering to avoid page jumps
                targetCard.scrollIntoView({
                    behavior: behavior,
                    block: 'nearest',
                    inline: 'start'
                });
            } else {
                // Desktop: use scrollTo for precise centering without page jumps
                const carouselRect = carousel.getBoundingClientRect();
                const cardRect = targetCard.getBoundingClientRect();
                const targetScrollLeft = targetCard.offsetLeft - (carouselRect.width / 2) + (cardRect.width / 2);
                
                track.scrollTo({
                    left: targetScrollLeft,
                    behavior: behavior
                });
            }
        };
        
        // Indicator functionality
        const indicator = container.querySelector('.carousel-indicator');
        if (indicator) {
            const indicatorTabs = indicator.querySelectorAll('.indicator-tab');
            const indicatorSlider = indicator.querySelector('.indicator-slider');
            
            // Initialize slider position
            const updateSliderPosition = (index) => {
                if (indicatorTabs[index]) {
                    const tab = indicatorTabs[index];
                    const indicatorTrack = indicator.querySelector('.indicator-track');
                    
                    // Get the computed styles to check for any padding
                    const trackStyles = window.getComputedStyle(indicatorTrack);
                    const trackPaddingLeft = parseFloat(trackStyles.paddingLeft);
                    
                    // Get positions relative to viewport
                    const tabRect = tab.getBoundingClientRect();
                    const trackRect = indicatorTrack.getBoundingClientRect();
                    
                    // Calculate the tab's position relative to the track's content box
                    const tabLeft = tabRect.left - trackRect.left - trackPaddingLeft;
                    const tabWidth = tab.offsetWidth;
                    
                    // Apply the transform
                    indicatorSlider.style.left = `${trackPaddingLeft}px`;
                    indicatorSlider.style.transform = `translateX(${tabLeft}px)`;
                    indicatorSlider.style.width = `${tabWidth}px`;
                    
                    // Update active states
                    indicatorTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                }
            };
            
            // Tab click handlers
            indicatorTabs.forEach((tab, index) => {
                tab.addEventListener('click', () => {
                    // Scroll the selected card into center view
                    const targetCard = cards[index];
                    centerCard(targetCard, 'smooth');
                });
            });
            
            // Debounce timer for scroll end detection
            let scrollTimer = null;
            
            // Update indicator on scroll
            track.addEventListener('scroll', () => {
                // Clear existing timer
                if (scrollTimer !== null) {
                    clearTimeout(scrollTimer);
                }
                
                // Find which card is closest to center by checking actual positions
                const scrollCenter = track.scrollLeft + (track.clientWidth / 2);
                let closestIndex = 0;
                let closestDistance = Infinity;
                
                cards.forEach((card, index) => {
                    const cardRect = card.getBoundingClientRect();
                    const trackRect = track.getBoundingClientRect();
                    const cardCenter = cardRect.left + (cardRect.width / 2) - trackRect.left;
                    const distance = Math.abs(cardCenter - (track.clientWidth / 2));
                    
                    if (distance < closestDistance) {
                        closestDistance = distance;
                        closestIndex = index;
                    }
                });
                
                updateSliderPosition(closestIndex);
                
                // Snap to center after scrolling stops (desktop only)
                scrollTimer = setTimeout(() => {
                    // Only auto-center on desktop (window width > 1000px)
                    if (window.innerWidth > 1000) {
                        const targetCard = cards[closestIndex];
                        centerCard(targetCard, 'smooth');
                    }
                }, 150);
            });
            
            // Initialize slider position
            setTimeout(() => {
                updateSliderPosition(0);
            }, 50);
            
            // Center the first card on load without affecting page scroll
            setTimeout(() => {
                if (cards[0] && carousel) {
                    // Calculate scroll position to center the first card
                    const carouselRect = carousel.getBoundingClientRect();
                    const cardRect = cards[0].getBoundingClientRect();
                    const scrollLeft = cards[0].offsetLeft - (carouselRect.width / 2) + (cardRect.width / 2);
                    
                    // Scroll the carousel, not the page
                    carousel.scrollLeft = scrollLeft;
                }
                updateSliderPosition(0);
            }, 100);
            
            // Update on window resize
            window.addEventListener('resize', () => {
                // Find which card is closest to center
                const scrollCenter = track.scrollLeft + (track.clientWidth / 2);
                let currentIndex = 0;
                let closestDistance = Infinity;
                
                cards.forEach((card, index) => {
                    const cardLeft = card.offsetLeft;
                    const cardCenter = cardLeft + (card.offsetWidth / 2);
                    const distance = Math.abs(cardCenter - scrollCenter);
                    
                    if (distance < closestDistance) {
                        closestDistance = distance;
                        currentIndex = index;
                    }
                });
                
                const currentCard = cards[currentIndex];
                centerCard(currentCard, 'auto');
                setTimeout(() => {
                    updateSliderPosition(currentIndex);
                }, 100);
            });
        }
        
        // Arrow navigation
        leftArrow.addEventListener('click', () => {
            // Find which card is closest to center
            const scrollCenter = track.scrollLeft + (track.clientWidth / 2);
            let currentIndex = 0;
            let closestDistance = Infinity;
            
            cards.forEach((card, index) => {
                const cardLeft = card.offsetLeft;
                const cardCenter = cardLeft + (card.offsetWidth / 2);
                const distance = Math.abs(cardCenter - scrollCenter);
                
                if (distance < closestDistance) {
                    closestDistance = distance;
                    currentIndex = index;
                }
            });
            
            const newIndex = Math.max(0, currentIndex - 1);
            
            if (newIndex !== currentIndex) {
                const targetCard = cards[newIndex];
                centerCard(targetCard, 'smooth');
            }
        });
        
        rightArrow.addEventListener('click', () => {
            // Find which card is closest to center
            const scrollCenter = track.scrollLeft + (track.clientWidth / 2);
            let currentIndex = 0;
            let closestDistance = Infinity;
            
            cards.forEach((card, index) => {
                const cardLeft = card.offsetLeft;
                const cardCenter = cardLeft + (card.offsetWidth / 2);
                const distance = Math.abs(cardCenter - scrollCenter);
                
                if (distance < closestDistance) {
                    closestDistance = distance;
                    currentIndex = index;
                }
            });
            
            const newIndex = Math.min(cards.length - 1, currentIndex + 1);
            
            if (newIndex !== currentIndex) {
                const targetCard = cards[newIndex];
                centerCard(targetCard, 'smooth');
            }
        });
        
        // Card click functionality
        cards.forEach(card => {
            card.addEventListener('click', (e) => {
                // Don't trigger card click if clicking on download link or icon
                if (e.target.classList.contains('card-download') || 
                    e.target.classList.contains('fa-download')) {
                    return;
                }
                
                const videoId = card.getAttribute('data-video-id');
                
                if (videoId) {
                    // Check if it's a YouTube video ID or a file path
                    if (videoId.includes('.pdf') || videoId.includes('/')) {
                        // It's a file path - open in new tab
                        window.open(videoId, '_blank');
                    } else {
                        // It's a YouTube video ID - open YouTube video
                        window.open(`https://www.youtube.com/watch?v=${videoId}`, '_blank');
                    }
                }
            });
            
            // Handle download icon clicks
            const downloadIcons = card.querySelectorAll('.fa-download');
            downloadIcons.forEach((icon, index) => {
                icon.addEventListener('click', (e) => {
                    e.stopPropagation();
                    // Extract the PDF path from the card's context
                    const title = card.querySelector('.card-title').textContent;
                    
                    // Chapter downloads
                    if (title.includes('Chapter 1')) {
                        window.open('Reading/Ch_01.pdf', '_blank');
                    } else if (title.includes('Chapter 2')) {
                        window.open('Reading/Ch_02.pdf', '_blank');
                    } else if (title.includes('Chapter 3')) {
                        window.open('Reading/Ch_03.pdf', '_blank');
                    }
                    // Vignette downloads
                    else if (title.includes('Vignette')) {
                        let vignetteNumber = '';
                        if (title.includes('Vignette A2')) vignetteNumber = 'A2';
                        else if (title.includes('Vignette A3')) vignetteNumber = 'A3';
                        else if (title.includes('Vignette A4')) vignetteNumber = 'A4';
                        
                        if (index === 0) {
                            // First icon - main vignette file
                            window.open(`Vignettes/Vignette_${vignetteNumber}.pdf`, '_blank');
                        } else {
                            // Second icon - solutions file
                            window.open(`Vignettes/Vignette_${vignetteNumber}_sols.pdf`, '_blank');
                        }
                    }
                    // Homework downloads
                    else if (title.includes('Homework')) {
                        let homeworkNumber = '';
                        if (title.includes('Homework A1')) homeworkNumber = 'A1';
                        else if (title.includes('Homework A2')) homeworkNumber = 'A2';
                        else if (title.includes('Homework A3')) homeworkNumber = 'A3';
                        else if (title.includes('Homework A4')) homeworkNumber = 'A4';
                        
                        if (index === 0) {
                            // First icon - main homework file
                            window.open(`Homework/HW_${homeworkNumber}.pdf`, '_blank');
                        } else {
                            // Second icon - solutions file
                            window.open(`Homework/HW_${homeworkNumber}_sols.pdf`, '_blank');
                        }
                    }
                });
            });
        });
        
        // Update arrow visibility based on scroll position
        function updateArrows() {
            const isAtStart = track.scrollLeft <= 0;
            const isAtEnd = track.scrollLeft >= track.scrollWidth - track.clientWidth;
            
            leftArrow.style.opacity = isAtStart ? '0.5' : '1';
            rightArrow.style.opacity = isAtEnd ? '0.5' : '1';
            leftArrow.style.pointerEvents = isAtStart ? 'none' : 'auto';
            rightArrow.style.pointerEvents = isAtEnd ? 'none' : 'auto';
        }
        
        // Listen for scroll events to update arrow states
        track.addEventListener('scroll', updateArrows);
        
        // Initial setup
        updateArrows();
        
        // Handle window resize
        window.addEventListener('resize', updateArrows);
    });
    
    // Intersection Observer for highlighting cards when carousel is in view
    const observerOptions = {
        root: null,
        rootMargin: '-30% 0px -30% 0px', // Only highlight when carousel is in center 40% of viewport
        threshold: 0
    };
    
    const carouselObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            const carousel = entry.target.querySelector('.carousel');
            const cards = carousel.querySelectorAll('.carousel-card');
            const track = carousel.querySelector('.carousel-track');
            
            if (entry.isIntersecting) {
                // Enable active state for cards in this carousel
                const updateActiveCardOnScroll = () => {
                    cards.forEach((card, index) => {
                        const cardRect = card.getBoundingClientRect();
                        const trackRect = track.getBoundingClientRect();
                        const cardCenter = cardRect.left + (cardRect.width / 2) - trackRect.left;
                        const distance = Math.abs(cardCenter - (track.clientWidth / 2));
                        
                        if (distance < 50 && !card.classList.contains('placeholder')) {
                            card.classList.add('active');
                        } else {
                            card.classList.remove('active');
                        }
                    });
                };
                
                track.addEventListener('scroll', updateActiveCardOnScroll);
                updateActiveCardOnScroll(); // Initial check
                
                // Store the handler for cleanup
                track._scrollHandler = updateActiveCardOnScroll;
            } else {
                cards.forEach(card => card.classList.remove('active'));
                
                // Remove scroll listener
                if (track._scrollHandler) {
                    track.removeEventListener('scroll', track._scrollHandler);
                    delete track._scrollHandler;
                }
            }
        });
    }, observerOptions);
    
    // Observe all carousel containers
    const carouselContainers = document.querySelectorAll('.carousel-container');
    carouselContainers.forEach(container => {
        carouselObserver.observe(container);
    });
    
    // Handle standalone card downloads
    const standaloneCard = document.querySelector('.standalone-card');
    if (standaloneCard) {
        const downloadIcons = standaloneCard.querySelectorAll('.fa-download');
        downloadIcons.forEach((icon, index) => {
            icon.style.cursor = 'pointer';
            icon.addEventListener('click', (e) => {
                e.stopPropagation();
                if (index === 0) {
                    // First icon - main demo file
                    window.open('Demos/Demo_A.pdf', '_blank');
                } else {
                    // Second icon - solutions file
                    window.open('Demos/Demo_A_sols.pdf', '_blank');
                }
            });
        });
    }
    
    // Observe MiniExam section for standalone card highlighting
    const miniexamSection = document.querySelector('#miniexam');
    if (miniexamSection && standaloneCard) {
        const standaloneObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    standaloneCard.classList.add('active');
                } else {
                    standaloneCard.classList.remove('active');
                }
            });
        }, observerOptions);
        
        standaloneObserver.observe(miniexamSection);
    }
});
</script>