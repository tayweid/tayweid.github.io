<!DOCTYPE html>

<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    
<title>Microeconomics | Part F</title>

<link rel="stylesheet" href="Part_clean.css">

</head>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100&family=Source+Serif+Pro:wght@100&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100&display=swap" rel="stylesheet">

<body>

<div class="wrapper">
<div class="left_div">
    <nav>
        <ul>
            <span>MICRO</span>
            <span>-ECON</span>
            <hr style="width: 80%; margin: 20px 0 10px auto;">
            <li style="margin: 0;"><a class="btn" href="Syllabus.pdf" target="_blank">Syllabus</a></li>
            <hr style="width: 80%; margin: 10px 0 10px auto;">
            <li><a href="https://tayweid.github.io/Econ_0100/Part_A">Part A</a></li>
            <li><a href="https://tayweid.github.io/Econ_0100/Part_B">Part B</a></li>
            <li><a href="https://tayweid.github.io/Econ_0100/Part_C">Part C</a></li>
            <li><a href="https://tayweid.github.io/Econ_0100/Part_D">Part D</a></li>
            <li><a href="https://tayweid.github.io/Econ_0100/Part_E">Part E</a></li>
            <li><a class="active" href="">Part F</a></li>
        </ul>
    </nav>
</div>

<div class="content">

    <div class="description">
        <h1 class="title"> Part F // How constraints shape buyers' choices</h1>        
        <p>
            <i>Part F</i> explores what to do when we can't have everything. We start by connecting <i>Factor Markets</i> and the <i>Labor Market</i> to buyer's income in <i>Final Goods</i> markets, which shapes their <i>Budget Constraint</i>. To understand choices within this constraint, we rank preferences using <i>Utility</i> and map <i>Indifference Curves</i> - like contour lines showing equally preferred combinations of goods. The <i>Consumer's Problem</i> is solved at the highest attainable indifference curve within the budget constraint, where the <i>Marginal Rate of Substitution</i> equals the <i>Marginal Rate of Transformation</i>.   
        </p>
        <p>
            This course maps the economic landscape, starting in <i>Part A</i> with how <i>Opportunity Cost</i> and <i>Specialization</i> create the need for coordination between people - the fundamental challenge that economics must solve. <i>Part B</i> introduced markets as coordination tools, using supply and demand to find equilibrium. <i>Parts C</i> and <i>Part D</i> revealed how markets can fail and when alternative tools are needed. After exploring seller incentives and market power can break markets in <i>Part E</i>, <i>Part F</i> completes our journey by showing how buyer trade-offs shape demand.
        </p>
    </div>

    <!-- CAROUSEL ---->
    <div class="carousel-container" id="part-f1">
        <h1 class="subtitle">Block F1 ~ Factor Markets</h1>
        <div class="carousel-indicator">
            <div class="indicator-track">
                <button class="indicator-tab active" data-index="0">Reading</button>
                <button class="indicator-tab" data-index="1">Vignette</button>
                <button class="indicator-tab" data-index="2">Homework</button>
                <button class="indicator-tab" data-index="3">Demo</button>
                <div class="indicator-slider"></div>
            </div>
        </div>
        <div class="carousel">
            <button class="carousel-arrow carousel-arrow-left" aria-label="Previous">
                <span>‹</span>
            </button>
            <div class="carousel-track">
                <div class="carousel-card" data-video-id="uwYCeUVcx4E">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/uwYCeUVcx4E/maxresdefault.jpg" alt="Chapter 18 AI Summary thumbnail">
                        <div class="play-button">🎧</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Chapter 18 ( <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Factor markets</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="n3LpswjCp6w">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/n3LpswjCp6w/maxresdefault.jpg" alt="Vignette F1 video thumbnail">
                        <div class="play-button">▶</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Vignette F1 ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Factor markets practice problems with video walkthrough</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="Homework/HW_F.pdf">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/default/maxresdefault.jpg" alt="Homework thumbnail" style="background: var(--main-md-color);">
                        <div class="play-button">📚</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Homework F ( <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Due: Sunday December 8th</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="zkn0CXaNOJY">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/zkn0CXaNOJY/maxresdefault.jpg" alt="Demo F1 video thumbnail">
                        <div class="play-button">▶</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Demo F1 ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">A change in the labor market - challenging demo</p>
                    </div>
                </div>
            </div>
            <button class="carousel-arrow carousel-arrow-right" aria-label="Next">
                <span>›</span>
            </button>
        </div>
    </div>

    <div class="carousel-container" id="part-f2">
        <h1 class="subtitle">Block F2 ~ Consumer Choice</h1>
        <div class="carousel-indicator">
            <div class="indicator-track">
                <button class="indicator-tab active" data-index="0">Reading</button>
                <button class="indicator-tab" data-index="1">Vignette</button>
                <button class="indicator-tab" data-index="2">Demo</button>
                <button class="indicator-tab" data-index="3">Review</button>
                <div class="indicator-slider"></div>
            </div>
        </div>
        <div class="carousel">
            <button class="carousel-arrow carousel-arrow-left" aria-label="Previous">
                <span>‹</span>
            </button>
            <div class="carousel-track">
                <div class="carousel-card" data-video-id="uwYCeUVcx4E">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/uwYCeUVcx4E/maxresdefault.jpg" alt="Chapter 21 AI Summary thumbnail">
                        <div class="play-button">🎧</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Chapter 21 ( <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Consumer choice</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="l2uq30_Cg10">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/l2uq30_Cg10/maxresdefault.jpg" alt="Vignette F2 video thumbnail">
                        <div class="play-button">▶</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Vignette F2 ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Consumer choice practice problems with video walkthrough</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="AMoYnpPAn0M">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/AMoYnpPAn0M/maxresdefault.jpg" alt="Demo F2 video thumbnail">
                        <div class="play-button">▶</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Demo F2 ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">A change in tech and a tax - challenging demo</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="Demos/Demo_Z.pdf">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/default/maxresdefault.jpg" alt="Demo Z thumbnail" style="background: var(--main-md-color);">
                        <div class="play-button">📚</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Demo Z ( <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">A bird's eye view of the semester</p>
                    </div>
                </div>
            </div>
            <button class="carousel-arrow carousel-arrow-right" aria-label="Next">
                <span>›</span>
            </button>
        </div>
    </div>

    <!-- RECITATIONS ---->

    <div class="carousel-container" id="recitations">
        <h1 class="subtitle">Recitations</h1>
        <div class="carousel-indicator">
            <div class="indicator-track">
                <button class="indicator-tab active" data-index="0">Vignette F1r</button>
                <button class="indicator-tab" data-index="1">Vignette F2r</button>
                <div class="indicator-slider"></div>
            </div>
        </div>
        <div class="carousel">
            <button class="carousel-arrow carousel-arrow-left" aria-label="Previous">
                <span>‹</span>
            </button>
            <div class="carousel-track">
                <div class="carousel-card" data-video-id="Vignettes/Vignette_F1.pdf">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/default/maxresdefault.jpg" alt="Vignette F1r thumbnail" style="background: var(--main-md-color);">
                        <div class="play-button">📝</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Vignette F1r ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Vignette F1r is an extended Vignette we examine in Recitation.</p>
                    </div>
                </div>
                
                <div class="carousel-card" data-video-id="Vignettes/Vignette_F2.pdf">
                    <div class="card-video">
                        <img src="https://img.youtube.com/vi/default/maxresdefault.jpg" alt="Vignette F2r thumbnail" style="background: var(--main-md-color);">
                        <div class="play-button">📝</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">Vignette F2r ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                        <p class="card-description">Vignette F2r is an extended Vignette we examine in Recitation.</p>
                    </div>
                </div>
            </div>
            <button class="carousel-arrow carousel-arrow-right" aria-label="Next">
                <span>›</span>
            </button>
        </div>
    </div>

    <!-- HOMEWORK DETAILS ---->

    <div id="homework-details">
        <h1 class="subtitle">Homework F Details</h1>
        <p>Homework F is due on Gradescope on <i>Sunday December 8th</i>.</p>
        
        <div class="carousel-card standalone-card">
            <div class="card-video" style="padding-bottom: 30%; background: var(--main-md-color);">
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; text-align: center;">
                    <h3>Homework FAQs</h3>
                </div>
            </div>
            <div class="card-content">
                <h3 class="card-title">Homework F ( <i class="fa fa-download"></i> )</h3>
                <div class="card-description">
                    <p><strong>Some FAQs:</strong></p>
                    <ol style="margin: 10px 0; padding-left: 20px;">
                        <li>In the graph for question 1, show Hagrid's initial budget constraint</li>
                        <li>For question 2, in the graph below question 1, show Hagrid's optimal consumption bundle on the budget constraint they already drew (using indifference curves), then on the same graph, show how Hagrid's optimal consumption bundle would change using shifts in budget constraints and indifference curves.</li>
                        <li>In the graph below question 3, show Hagrid's budget constraint from question 2, then show the shift in the budget constraint on the budget constraint for the same graph.</li>
                        <li>Show the optimal consumption bundles (using indifference curves) on the budget constraints</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <!-- MINIEXAMS ---->

    <div id="miniexam">
        <h1 class="subtitle" id="miniexam">MiniExams</h1>
        <p>
            You will begin to learn that if you understand the concepts and do the work in the Vignettes, Homework, and Demo, you're going to be in good shape on the MiniExam.
        </p>

        <div class="carousel-card standalone-card">
            <div class="card-video" style="padding-bottom: 30%; background: var(--main-md-color);">
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; text-align: center;">
                    <h3>MiniExam F</h3>
                    <p>Part F Content Only</p>
                </div>
            </div>
            <div class="card-content">
                <h3 class="card-title">MiniExam F</h3>
                <p class="card-description">Covers everything in Part F and will be held during finals week on <i>Thursday December 12</i> at 2:00 PM if you're in the 10AM section or at 3:00 PM if you're in the 11AM section.</p>
            </div>
        </div>

        <div class="carousel-card standalone-card">
            <div class="card-video" style="padding-bottom: 30%; background: var(--main-md-color);">
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; text-align: center;">
                    <h3>MiniExam Z</h3>
                    <p>Comprehensive Review</p>
                </div>
            </div>
            <div class="card-content">
                <h3 class="card-title">MiniExam Z</h3>
                <p class="card-description">Covers everything from the semester and will be held after a 5 minute break after MiniExam F during the final exam period.</p>
            </div>
        </div>

        <div class="carousel-card standalone-card">
            <div class="card-video">
                <iframe width="100%" height="100%" src="https://www.youtube.com/embed/zkn0CXaNOJY" frameborder="0" allowfullscreen></iframe>
            </div>
            <div class="card-content">
                <h3 class="card-title">Demo F1 ( <i class="fa fa-download"></i> | Solutions <i class="fa fa-download"></i> )</h3>
                <p class="card-description">A change in the labor market - note: this demo is a bit difficult so focus on Vignette F2.</p>
            </div>
        </div>
    </div>
    
    <div style="margin-bottom:50%"></div>

</div>

    <!-- RIGHT NAVIGATION ---->
    <div class="right_div">
        <nav>
            <ul>
                <span>Contents</span>
                <hr style="width: 80%; margin: 20px 0 10px 0;">
                <li style="margin: 0;"><a href="#part-f1" class="active" style="font-size: 20px;">F1 | Factor Markets</a></li>
                <li><a href="#part-f2" style="font-size: 20px;">F2 | Consumer Choice</a></li>
                <li><a href="#recitations" style="font-size: 20px;">Recitations</a></li>
                <li><a href="#homework-details" style="font-size: 20px;">Homework Details</a></li>
                <li><a href="#miniexam" style="font-size: 20px;">MiniExams</a></li>
            </ul>
        </nav>
    </div>
</div> <!-- Close wrapper ---->

</body>
</html>

<script type="text/javascript" src="Part.js"></script>

<script>
// Carousel functionality for multiple carousels
document.addEventListener('DOMContentLoaded', function() {
    const carousels = document.querySelectorAll('.carousel');
    
    // Get responsive card width
    const getCardWidth = () => {
        if (window.innerWidth <= 1000) {
            return window.innerWidth - 20; // Mobile: full width minus padding
        }
        return Math.min(840, window.innerWidth * 0.9 + 40); // Desktop: responsive width + gap
    };
    
    carousels.forEach(carousel => {
        const container = carousel.closest('.carousel-container');
        const track = carousel.querySelector('.carousel-track');
        const leftArrow = carousel.querySelector('.carousel-arrow-left');
        const rightArrow = carousel.querySelector('.carousel-arrow-right');
        const cards = carousel.querySelectorAll('.carousel-card');
        
        // Indicator functionality
        const indicator = container.querySelector('.carousel-indicator');
        if (indicator) {
            const indicatorTabs = indicator.querySelectorAll('.indicator-tab');
            const indicatorSlider = indicator.querySelector('.indicator-slider');
            
            // Initialize slider position
            const updateSliderPosition = (index) => {
                if (indicatorTabs[index]) {
                    const tab = indicatorTabs[index];
                    const indicatorTrack = indicator.querySelector('.indicator-track');
                    
                    // Get the computed styles to check for any padding
                    const trackStyles = window.getComputedStyle(indicatorTrack);
                    const trackPaddingLeft = parseFloat(trackStyles.paddingLeft);
                    
                    // Get positions relative to viewport
                    const tabRect = tab.getBoundingClientRect();
                    const trackRect = indicatorTrack.getBoundingClientRect();
                    
                    // Calculate the tab's position relative to the track's content box
                    const tabLeft = tabRect.left - trackRect.left - trackPaddingLeft;
                    const tabWidth = tab.offsetWidth;
                    
                    // Apply the transform
                    indicatorSlider.style.left = `${trackPaddingLeft}px`;
                    indicatorSlider.style.transform = `translateX(${tabLeft}px)`;
                    indicatorSlider.style.width = `${tabWidth}px`;
                    
                    // Update active states
                    indicatorTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                }
            };
            
            // Tab click handlers
            indicatorTabs.forEach((tab, index) => {
                tab.addEventListener('click', () => {
                    // Scroll the selected card into center view
                    const targetCard = cards[index];
                    if (targetCard) {
                        targetCard.scrollIntoView({
                            behavior: 'smooth',
                            block: 'nearest',
                            inline: 'center'
                        });
                    }
                });
            });
            
            // Debounce timer for scroll end detection
            let scrollTimer = null;
            
            // Update indicator on scroll
            track.addEventListener('scroll', () => {
                // Clear existing timer
                if (scrollTimer !== null) {
                    clearTimeout(scrollTimer);
                }
                
                // Find which card is closest to center by checking actual positions
                const scrollCenter = track.scrollLeft + (track.clientWidth / 2);
                let closestIndex = 0;
                let closestDistance = Infinity;
                
                cards.forEach((card, index) => {
                    const cardRect = card.getBoundingClientRect();
                    const trackRect = track.getBoundingClientRect();
                    const cardCenter = cardRect.left + (cardRect.width / 2) - trackRect.left;
                    const distance = Math.abs(cardCenter - (track.clientWidth / 2));
                    
                    if (distance < closestDistance) {
                        closestDistance = distance;
                        closestIndex = index;
                    }
                });
                
                updateSliderPosition(closestIndex);
                
                // Snap to center after scrolling stops
                scrollTimer = setTimeout(() => {
                    const targetCard = cards[closestIndex];
                    if (targetCard) {
                        targetCard.scrollIntoView({
                            behavior: 'smooth',
                            block: 'nearest',
                            inline: 'center'
                        });
                    }
                }, 150);
            });
            
            // Initialize slider position
            setTimeout(() => {
                updateSliderPosition(0);
            }, 50);
            
            // Center the first card on load
            setTimeout(() => {
                if (cards[0]) {
                    cards[0].scrollIntoView({
                        behavior: 'auto',
                        block: 'nearest',
                        inline: 'center'
                    });
                }
                updateSliderPosition(0);
            }, 100);
            
            // Update on window resize
            window.addEventListener('resize', () => {
                const currentCard = carousel.querySelector('.carousel-card.active');
                const currentIndex = Array.from(cards).indexOf(currentCard);
                if (currentCard) {
                    currentCard.scrollIntoView({
                        behavior: 'auto',
                        block: 'nearest',
                        inline: 'center'
                    });
                }
                setTimeout(() => {
                    updateSliderPosition(currentIndex >= 0 ? currentIndex : 0);
                }, 100);
            });
        }
        
        // Arrow navigation
        leftArrow.addEventListener('click', () => {
            const currentCard = carousel.querySelector('.carousel-card.active');
            const currentIndex = Array.from(cards).indexOf(currentCard);
            const newIndex = Math.max(0, currentIndex - 1);
            
            if (newIndex !== currentIndex) {
                const targetCard = cards[newIndex];
                if (targetCard) {
                    targetCard.scrollIntoView({
                        behavior: 'smooth',
                        block: 'nearest',
                        inline: 'center'
                    });
                }
            }
        });
        
        rightArrow.addEventListener('click', () => {
            const currentCard = carousel.querySelector('.carousel-card.active');
            const currentIndex = Array.from(cards).indexOf(currentCard);
            const newIndex = Math.min(cards.length - 1, currentIndex + 1);
            
            if (newIndex !== currentIndex) {
                const targetCard = cards[newIndex];
                if (targetCard) {
                    targetCard.scrollIntoView({
                        behavior: 'smooth',
                        block: 'nearest',
                        inline: 'center'
                    });
                }
            }
        });
        
        // Card click functionality
        cards.forEach(card => {
            card.addEventListener('click', (e) => {
                // Don't trigger card click if clicking on download link or icon
                if (e.target.classList.contains('card-download') || 
                    e.target.classList.contains('fa-download')) {
                    return;
                }
                
                const videoId = card.getAttribute('data-video-id');
                
                if (videoId) {
                    // Check if it's a YouTube video ID or a file path
                    if (videoId.includes('.pdf') || videoId.includes('/')) {
                        // It's a file path - open in new tab
                        window.open(videoId, '_blank');
                    } else {
                        // It's a YouTube video ID - open YouTube video
                        window.open(`https://www.youtube.com/watch?v=${videoId}`, '_blank');
                    }
                }
            });
            
            // Handle download icon clicks
            const downloadIcons = card.querySelectorAll('.fa-download');
            downloadIcons.forEach((icon, index) => {
                icon.addEventListener('click', (e) => {
                    e.stopPropagation();
                    // Extract the PDF path from the card's context
                    const title = card.querySelector('.card-title').textContent;
                    
                    // Chapter downloads
                    if (title.includes('Chapter 18')) {
                        window.open('Reading/Ch_18.pdf', '_blank');
                    } else if (title.includes('Chapter 21')) {
                        window.open('Reading/Ch_21.pdf', '_blank');
                    }
                    // Vignette downloads
                    else if (title.includes('Vignette')) {
                        let vignetteNumber = '';
                        if (title.includes('Vignette F1')) vignetteNumber = 'F1';
                        else if (title.includes('Vignette F2')) vignetteNumber = 'F2';
                        
                        if (index === 0) {
                            // First icon - main vignette file
                            window.open(`Vignettes/Vignette_${vignetteNumber}.pdf`, '_blank');
                        } else {
                            // Second icon - solutions file (use _new versions)
                            window.open(`Vignettes/Vignette_${vignetteNumber}_sols_new.pdf`, '_blank');
                        }
                    }
                    // Homework downloads
                    else if (title.includes('Homework')) {
                        // Only main homework file available
                        window.open('Homework/HW_F.pdf', '_blank');
                    }
                    // Demo downloads
                    else if (title.includes('Demo F1')) {
                        if (index === 0) {
                            // First icon - main demo file
                            window.open('Demos/Demo_F1.pdf', '_blank');
                        } else {
                            // Second icon - solutions file
                            window.open('Demos/Demo_F1_sols.pdf', '_blank');
                        }
                    }
                    else if (title.includes('Demo F2')) {
                        if (index === 0) {
                            // First icon - main demo file
                            window.open('Demos/Demo_F2.pdf', '_blank');
                        } else {
                            // Second icon - solutions file
                            window.open('Demos/Demo_F2_sols.pdf', '_blank');
                        }
                    }
                    else if (title.includes('Demo Z')) {
                        // Only main demo file available
                        window.open('Demos/Demo_Z.pdf', '_blank');
                    }
                });
            });
        });
        
        // Update arrow visibility based on scroll position
        function updateArrows() {
            const isAtStart = track.scrollLeft <= 0;
            const isAtEnd = track.scrollLeft >= track.scrollWidth - track.clientWidth;
            
            leftArrow.style.opacity = isAtStart ? '0.5' : '1';
            rightArrow.style.opacity = isAtEnd ? '0.5' : '1';
            leftArrow.style.pointerEvents = isAtStart ? 'none' : 'auto';
            rightArrow.style.pointerEvents = isAtEnd ? 'none' : 'auto';
        }
        
        // Listen for scroll events to update arrow states
        track.addEventListener('scroll', updateArrows);
        
        // Initial setup
        updateArrows();
        
        // Handle window resize
        window.addEventListener('resize', updateArrows);
    });
    
    // Intersection Observer for highlighting cards when carousel is in view
    const observerOptions = {
        root: null,
        rootMargin: '-30% 0px -30% 0px', // Only highlight when carousel is in center 40% of viewport
        threshold: 0
    };
    
    const carouselObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            const carousel = entry.target.querySelector('.carousel');
            const cards = carousel.querySelectorAll('.carousel-card');
            const track = carousel.querySelector('.carousel-track');
            
            if (entry.isIntersecting) {
                // Enable active state for cards in this carousel
                const updateActiveCardOnScroll = () => {
                    cards.forEach((card, index) => {
                        const cardRect = card.getBoundingClientRect();
                        const trackRect = track.getBoundingClientRect();
                        const cardCenter = cardRect.left + (cardRect.width / 2) - trackRect.left;
                        const distance = Math.abs(cardCenter - (track.clientWidth / 2));
                        
                        if (distance < 50 && !card.classList.contains('placeholder')) {
                            card.classList.add('active');
                        } else {
                            card.classList.remove('active');
                        }
                    });
                };
                
                track.addEventListener('scroll', updateActiveCardOnScroll);
                updateActiveCardOnScroll(); // Initial check
                
                // Store the handler for cleanup
                track._scrollHandler = updateActiveCardOnScroll;
            } else {
                // Remove all active states when carousel is out of view
                cards.forEach(card => card.classList.remove('active'));
                
                // Remove scroll listener
                if (track._scrollHandler) {
                    track.removeEventListener('scroll', track._scrollHandler);
                    delete track._scrollHandler;
                }
            }
        });
    }, observerOptions);
    
    // Observe all carousel containers
    const carouselContainers = document.querySelectorAll('.carousel-container');
    carouselContainers.forEach(container => {
        carouselObserver.observe(container);
    });
    
    // Handle standalone card downloads
    const standaloneCards = document.querySelectorAll('.standalone-card');
    standaloneCards.forEach(card => {
        const downloadIcons = card.querySelectorAll('.fa-download');
        downloadIcons.forEach((icon, index) => {
            icon.style.cursor = 'pointer';
            icon.addEventListener('click', (e) => {
                e.stopPropagation();
                const title = card.querySelector('.card-title').textContent;
                
                if (title.includes('Homework F')) {
                    // Homework F download
                    window.open('Homework/HW_F.pdf', '_blank');
                } else if (title.includes('Demo F1')) {
                    if (index === 0) {
                        // First icon - main demo file
                        window.open('Demos/Demo_F1.pdf', '_blank');
                    } else {
                        // Second icon - solutions file
                        window.open('Demos/Demo_F1_sols.pdf', '_blank');
                    }
                }
            });
        });
    });
    
    // Observe sections for standalone card highlighting
    const sectionsToObserve = ['#homework-details', '#miniexam'];
    sectionsToObserve.forEach(sectionId => {
        const section = document.querySelector(sectionId);
        if (section) {
            const sectionCards = section.querySelectorAll('.standalone-card');
            if (sectionCards.length > 0) {
                const standaloneObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            sectionCards.forEach(card => card.classList.add('active'));
                        } else {
                            sectionCards.forEach(card => card.classList.remove('active'));
                        }
                    });
                }, observerOptions);
                
                standaloneObserver.observe(section);
            }
        }
    });
});
</script>