---
format:
  revealjs:
    css: custom.css
    transition: none
---

## ECON 0150 | Economic Data Analysis {.center}
<p class="subheader-center">The economist's data analysis skillset.</p>

<br> 

### *Part 1.2 | Cross-Sectional (Numerical) Data*

---

## Cross-Sectional Numerical Data
<p class="subheader">Comparing numerical values across entities</p>

. . .

*> Cross-sectional data: many entities, one point in time*

. . .

*> Numerical variables: values you can do math with (age, income, consumption)*

. . .

*> Key question: How is this variable distributed?*

---

## Two Tools for Numerical Distributions
<p class="subheader">Choose based on sample size and what you want to see</p>

. . .

| Tool | Best for | Shows |
|------|----------|-------|
| Histogram | Many observations | Shape of distribution |
| Boxplot + Stripplot | Fewer observations | Quartiles + individual values |

---

## Histograms: Shape of the Distribution
<p class="subheader">Use when you have many observations</p>

---

## Histograms
<p class="subheader">Q. Which age group has the most Starbucks customers?</p>

![](i/i_01.png)

. . .

*> the bin sizes aren't even, making it hard to interpret*

---

## Numerical Variables: Histograms
<p class="subheader">Q. Which age group has the most Starbucks customers?</p>

![](i/i_02.png)

*> the bin sizes aren't even, making it hard to interpret*

---

## Histograms: Use equal sized bins
<p class="subheader">Q. Which age group has the most Starbucks customers?</p>

![](i/i_03.png)

. . .

*> but what if we want to distinguish between a 55 year old and a 60 year old?*

---

## Histograms: Use narrow enough bins
<p class="subheader">Q. Which age group has the most Starbucks customers?</p>

![](i/i_04.png)

. . .

*> what if we take this even further?*

*> what if we compare 44 year olds to 45 year olds?*

---

## Histograms: Avoid visualizing noise
<p class="subheader">Q. Do 44 or 45 year olds spend more at Starbucks?</p>

![](i/i_05.png)

. . .

*> we can go too far, introducing statistical noise. how do we fix the problem?*

. . .

*> increase the sample size or the bin width!*

---

## Histograms: Balance resolution vs noise
<p class="subheader">Q. Which age group has the most Starbucks customers?</p>

![](i/i_06.png)

*> larger sample has less noise!*

---

## Histograms: Balance resolution vs noise
<p class="subheader">Q. Which age group has the most Starbucks customers?</p>

![](i/i_07.png)

*> larger bins also has less noise!*

---

## Describing the Distribution: Center and Spread
<p class="subheader">Two numbers that summarize a histogram</p>

. . .

- **Mean** — the average value (center)

. . .

- **Standard Deviation (SD)** — typical distance from the mean (spread)

---

## Mean and Standard Deviation
<p class="subheader">Q. What is the average age of Starbucks customers?</p>

![](i/i_04.png)

. . .

*> Mean ≈ 50 years; SD ≈ 15 years*

. . .

*> "The average customer is about 50; ages typically vary by about 15 years from that average"*

---

## Histograms: Summary
<p class="subheader">... use the right summary tool for the variable type</p>

<br><br>

:::{.incremental}
- Use histograms to visualize continuous variables.
- Make histograms with equally sized bins.
- Histograms with bins that are too narrow increase statistical noise, which can obscure underlying relationships.
:::

---

## S-T-E for Histograms
<p class="subheader">What we just did</p>

| Step | Action |
|------|--------|
| SELECT | All Starbucks customers |
| TRANSFORM | Count customers within each age bin |
| ENCODE | Bin → x-position; Count → bar height |

. . .

*> TRANSFORM for histograms = count within bins*

---

## Exercise 1.2 | Histograms
<p class="subheader">Q. Which age group among those making $40k or less has the most Starbucks customers?</p>

<br><br>

Lets use the data to examine whether customers between 45 - 55 years old spend the most among customers making less than $40k.

**Data**: *`Starbucks_Customer_Profiles_40k.csv`*

---

## Exercise 1.2 | Histograms
<p class="subheader">Q. Which age group among those making $40k or less has the most Starbucks customers?</p>

. . .

```{.python}
# Histogram with 5 year bins
sns.histplot(customers, x='age', bins=range(20,100,5))
```

. . .

![](i/ex_01.png)

. . .

```{.python}
# Save Figure
plt.savefig('exercise_1_2_histogram.png')
```

---

## Exercise 1.2 | Mean and Standard Deviation
<p class="subheader">Summarize the distribution with two numbers</p>

. . .

```{.python}
# Calculate the mean
customers['age'].mean()
```

. . .

```{.python}
# Calculate the standard deviation
customers['age'].std()
```

. . .

*> Mean tells us the center; SD tells us the spread*

. . .

<br>

*"The average customer is about 50 years old; ages typically vary by about 15 years from that average."*

---

## What if we have fewer observations?
<p class="subheader">Histograms need many data points to show shape</p>

. . .

*> With few observations, histogram bins become noisy or empty*

. . .

*> We need a different tool: boxplots + stripplots*

---

## Histograms vs Boxplots
<p class="subheader">Q. Which countries drank an average amount of coffee?</p>

![](i/i_08.png)

. . .

*> histogram bins make it impossible to see exact values or quartiles*

---

## Boxplots
<p class="subheader"> Q. Which countries drank the most coffee in 1999?</p>

![](i/i_09.png)

. . .

*> as we'll see, boxplots can tell us about quartiles*

. . .

*> but boxplots are still pretty unclear for our question*

---

## Boxplots + Stripplots
<p class="subheader"> Q. Which countries drank the most coffee in 1999?</p>

![](i/i_10.png)

*> here we can see the datapoints directly with the boxplot*

. . .

*> each point represents a country's coffee consumption*

---

## Boxplots + Stripplots
<p class="subheader"> Q. Which countries drank the most coffee in 1999?</p>

![](i/i_11.png)

*> each element of the boxplot represents one of these five quartiles*

---

## Boxplots + Stripplots
<p class="subheader">Which countries consumed more than 8 kg per capita?</p>

![](i/i_12.png)

---

## Boxplots + Stripplots
<p class="subheader">Which countries consumed more than 8 kg per capita?</p>

![](i/i_13.png)

*> we can highlight the relevant subsets of the data*

---

## Boxplots + Stripplots
<p class="subheader">Which country consumed the most coffee per capita?</p>

![](i/i_14.png)

. . .

*> we can find the exact values according to quartiles*

---

## Boxplots + Stripplots
<p class="subheader">Which country consumed the most coffee per capita?</p>

![](i/i_15.png)

*> we can find the exact values according to quartiles*

*> Finland consumed the most coffee per capita in 1999*

---

## Boxplots + Stripplots
<p class="subheader">Which country consumed the least coffee per capita?</p>

![](i/i_14.png)

---

## Boxplots + Stripplots
<p class="subheader">Which country consumed the least coffee per capita?</p>

![](i/i_16.png)

*> Russia consumed the least coffee per capita in 1999*

---

## Boxplots + Stripplots
<p class="subheader">How about the median?</p>

![](i/i_14.png)

---

## Boxplots + Stripplots
<p class="subheader">How about the median?</p>

![](i/i_17.png)

*> the US!*

---

## Boxplots + Stripplots
<p class="subheader">Which country consumes more than exactly 25% of countries?</p>

![](i/i_14.png)

---

## Boxplots + Stripplots
<p class="subheader">Which country consumes more than exactly 25% of countries?</p>

![](i/i_18.png)

*> Slovakia!*

---

## Boxplots + Stripplots
<p class="subheader">Which country consumes more than exactly 75% of countries?</p>

![](i/i_14.png)

---

## Boxplots + Stripplots
<p class="subheader">Which country consumes more than exactly 75% of countries?</p>

![](i/i_19.png)

*> Netherlands*

---

## Boxplots + Stripplots
<p class="subheader">Boxplots show quartiles; stripplots show the data.</p>

![](i/i_20.png)

---

## Boxplots + Stripplots: Summary
<p class="subheader">Boxplots show quartiles; stripplots show the data.</p>

<br><br>

:::{.incremental}
- Boxplots make it easy to show the quartiles.
- Stripplots can show the distribution of the data.
- We can highlight subsets of the data.
:::

---

## S-T-E for Boxplots + Stripplots
<p class="subheader">What we just did</p>

| Step | Action |
|------|--------|
| SELECT | All coffee-importing countries in 1999 |
| TRANSFORM | Calculate quartiles (min, Q1, median, Q3, max) |
| ENCODE | Quartile → box position; Value → point position |

. . .

*> TRANSFORM for boxplots = calculate quartiles*

---

## Exercise 1.2 | Boxplots + Stripplots
<p class="subheader">Show the distribution of coffee consumption per capita in 2019.</p>

<br><br>

Lets use a boxplot and stripplot to examine the distribution of coffee consumption per capita among coffee-importing countries in 2019.

- **Data:** `Coffee_Per_Cap_2019.csv`

---

## Exercise 1.2 | Boxplots + Stripplots
<p class="subheader">Show the distribution of coffee consumption per capita in 2019.</p>

. . .

```{.python}
# Boxplot with no outliers
sns.boxplot(coffee, x='Coffee_2019', whis=(0,100))
```

. . .

```{.python}
# Stripplot
sns.stripplot(coffee, x='Coffee_2019')
```

. . .

![](i/ex_02.png)

. . .

```{.python}
# Save Figure
plt.savefig('exercise_1_2_boxplot.png')
```

---

## Exercise 1.2 | Quartiles
<p class="subheader">Calculate the five-number summary</p>

. . .

```{.python}
# Minimum and Maximum
coffee['Coffee_2019'].min()
coffee['Coffee_2019'].max()
```

. . .

```{.python}
# Quartiles (Q1, Median, Q3)
coffee['Coffee_2019'].quantile(0.25)
coffee['Coffee_2019'].median()
coffee['Coffee_2019'].quantile(0.75)
```

. . .

*> These five numbers define the boxplot: min, Q1, median, Q3, max*

---

## Building Blocks
<p class="subheader">What this unit adds to your toolkit</p>

| Block | New in 1.2 |
|-------|------------|
| Variables | Numerical |
| Structures | Cross-section |
| Operations | Bin, Mean, SD, Quartiles |
| Visualizations | Histogram, Boxplot, Stripplot |

. . .

<br>

*> Next: lets add a time dimension*