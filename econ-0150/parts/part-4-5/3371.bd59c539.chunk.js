/*! For license information please see 3371.bd59c539.chunk.js.LICENSE.txt */
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3371],{66356:(e,n,t)=>{t.d(n,{c:()=>d});var i=t(54499),a=t(43253),r=t(53303),o=t(55127),u=t.n(o),l=t(96540),s=t(91271);function d(e){var n=e.hasPrefix,t=void 0!==n&&n,o=e.timestamp,d=e.testId,c=e.isShorthand,m=e.isSameYearShorthand,v=e.includeMinutesAgo,f=e.includeTimeOfDay,p=void 0!==f&&f,k=Date.now(),b=(0,i.A)(k,o),y=(0,a.A)(k,o);if(0===y){var h=(0,r.A)(k,o);if(v&&h>0){var g="".concat(h," ").concat(u()("min",h)," ago");return l.createElement(l.Fragment,null,g)}var N=t?"just now":"Just now";return l.createElement(l.Fragment,null,N)}if(y>=1&&y<24){var S=c?"".concat(y,"h ago"):"".concat(y," ").concat(u()("hour",y)," ago");return l.createElement(l.Fragment,null,S)}if(b>=1&&b<7){var w=c?"".concat(b,"d ago"):"".concat(b," ").concat(u()("day",b)," ago");return l.createElement(l.Fragment,null,w)}return(0,s.n9)({timestamp:o,testId:d,isShorthand:c,isSameYearShorthand:m,includeTimeOfDay:p})}},4369:(e,n,t)=>{t.d(n,{z:()=>E});var i,a=t(64467),r=t(5544),o=t(95420),u=t(96540),l=t(52764),s=t(14782),d=t(52290),c=t(86527),m=t(46445),v=t(20036),f=t(36557),p=t(91830);function k(){return k=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},k.apply(null,arguments)}const b=function(e){return u.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,viewBox:"0 0 20 16"},e),i||(i=u.createElement("path",{d:"M0 .353v15.294h20V.353zm6.948 9.374L10 12.226l3.052-2.499 4.877 4.73H2.071zm-5.75 3.913V5.02l4.82 3.946zm12.784-4.675 4.82-3.946v8.621zm4.82-7.421v1.933L10 10.682 1.198 3.477V1.544z"})))};var y=t(60603),h={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}}]},g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendPostAsEmailsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendPostAsEmails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}]}]}}]};function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){(0,a.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function w(e){var n=e.post,t=e.onClick,i=e.menuStyle,a=(0,y.e)(!1),l=(0,r.A)(a,3),s=l[0],k=l[1],N=l[2],w=(0,p.zF)(),E=function(){N(),t()},O=(0,o.n)(g,{variables:{postId:(null==n?void 0:n.id)||""},onCompleted:function(e){var n=e.sendPostAsEmails;w(n?{message:"Your story has been emailed to subscribers.",toastStyle:"MESSAGE",duration:2e3}:{message:"We couldn't process your request. Try again, or contact our support team.",toastStyle:"ERROR",duration:2e3})},update:function(e,t){var i={id:"Post:".concat(null==n?void 0:n.id),fragment:h,fragmentName:"NewsletterV3EmailToSubscribersMenuItem_post"},a=e.readFragment(i);t.data&&a&&e.writeFragment(S(S({},i),{},{data:S(S({},a),{},{isAuthorNewsletter:t.data.sendPostAsEmails})}))}}),F=(0,r.A)(O,1)[0];return u.createElement(u.Fragment,null,u.createElement(d.a,{display:"inline-block"},"TEXT"===i?u.createElement(f.kZ,{scale:"M"},u.createElement(c.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=n&&n.isAuthorNewsletter?(w({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),t()):k()}},"Email to subscribers")):u.createElement(c.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=n&&n.isAuthorNewsletter?(w({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),t()):k()}},u.createElement(v.u,{icon:u.createElement(b,{"aria-label":"Email to subscribers"}),tooltipText:"Email to subscribers"}))),u.createElement(m.T,{onConfirm:function(){F(),E()},isVisible:s,hide:E,titleText:"Email to subscribers",confirmText:"Send",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!0,withCloseButton:!0,isDestructiveAction:!1},"A link to this story will be emailed to all your subscribers."))}function E(e){var n=e.post,t=e.onClick,i=e.menuStyle,a=e.paddingLeftRight,r=void 0===a?"20px":a;return u.createElement(l.c,null,(function(e){var a,o,l;return e&&e.id===(null==n||null===(a=n.creator)||void 0===a?void 0:a.id)&&(null==n||!n.isNewsletter)&&((null==n||null===(o=n.creator)||void 0===o||null===(l=o.newsletterV3)||void 0===l?void 0:l.subscribersCount)||0)>0?u.createElement(s.q3,{paddingTopBottom:"8px",paddingLeftRight:r},u.createElement(w,{post:n,onClick:t,menuStyle:i})):null}))}},8457:(e,n,t)=>{t.d(n,{m:()=>T});var i=t(96540),a=t(27721),r=t(14782),o=t(86527),u=t(82284),l=t(10467),s=t(5544),d=t(95420),c=t(34317),m=t(49287),v=t(42976),f=t(91830),p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WithdrawSubmissionMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"submissionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateSubmissionStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"submissionId"},value:{kind:"Variable",name:{kind:"Name",value:"submissionId"}}},{kind:"ObjectField",name:{kind:"Name",value:"status"},value:{kind:"EnumValue",value:"CANCELLED"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"status"}}]}}]}}]},k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WithdrawOrRemovePostViaCollectionMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateSubmissionStatusInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateSubmissionStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"status"}}]}}]}}]};function b(){var e=w(),n=e.m(b),t=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function i(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===t||"GeneratorFunction"===(n.displayName||n.name))}var a={throw:1,return:2,break:3,continue:3};function r(e){var n,t;return function(i){n||(n={stop:function(){return t(i.a,2)},catch:function(){return i.v},abrupt:function(e,n){return t(i.a,a[e],n)},delegateYield:function(e,a,r){return n.resultName=a,t(i.d,y(e),r)},finish:function(e){return t(i.f,e)}},t=function(e,t,a){i.p=n.prev,i.n=n.next;try{return e(t,a)}finally{n.next=i.n}}),n.resultName&&(n[n.resultName]=i.v,n.resultName=void 0),n.sent=i.v,n.next=i.n;try{return e.call(this,n)}finally{i.p=n.prev,i.n=n.next}}}return(b=function(){return{wrap:function(n,t,i,a){return e.w(r(n),t,i,a&&a.reverse())},isGeneratorFunction:i,mark:e.m,awrap:function(e,n){return new O(e,n)},AsyncIterator:S,async:function(e,n,t,a,o){return(i(n)?N:g)(r(e),n,t,a,o)},keys:h,values:y}})()}function y(e){if(null!=e){var n=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],t=0;if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}throw new TypeError((0,u.A)(e)+" is not iterable")}function h(e){var n=Object(e),t=[];for(var i in n)t.unshift(i);return function e(){for(;t.length;)if((i=t.pop())in n)return e.value=i,e.done=!1,e;return e.done=!0,e}}function g(e,n,t,i,a){var r=N(e,n,t,i,a);return r.next().then((function(e){return e.done?e.value:r.next()}))}function N(e,n,t,i,a){return new S(w().w(e,n,t,i),a||Promise)}function S(e,n){function t(i,a,r,o){try{var u=e[i](a),l=u.value;return l instanceof O?n.resolve(l.v).then((function(e){t("next",e,r,o)}),(function(e){t("throw",e,r,o)})):n.resolve(l).then((function(e){u.value=e,r(u)}),(function(e){return t("throw",e,r,o)}))}catch(e){o(e)}}var i;this.next||(E(S.prototype),E(S.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),E(this,"_invoke",(function(e,a,r){function o(){return new n((function(n,i){t(e,r,n,i)}))}return i=i?i.then(o,o):o()}),!0)}function w(){var e,n,t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function r(t,i,a,r){var l=i&&i.prototype instanceof u?i:u,s=Object.create(l.prototype);return E(s,"_invoke",function(t,i,a){var r,u,l,s=0,d=a||[],c=!1,m={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(n,t){return r=n,u=0,l=e,m.n=t,o}};function v(t,i){for(u=t,l=i,n=0;!c&&s&&!a&&n<d.length;n++){var a,r=d[n],v=m.p,f=r[2];t>3?(a=f===i)&&(l=r[(u=r[4])?5:(u=3,3)],r[4]=r[5]=e):r[0]<=v&&((a=t<2&&v<r[1])?(u=0,m.v=i,m.n=r[1]):v<f&&(a=t<3||r[0]>i||i>f)&&(r[4]=t,r[5]=i,m.n=f,u=0))}if(a||t>1)return o;throw c=!0,i}return function(a,d,f){if(s>1)throw TypeError("Generator is already running");for(c&&1===d&&v(d,f),u=d,l=f;(n=u<2?e:l)||!c;){r||(u?u<3?(u>1&&(m.n=-1),v(u,l)):m.n=l:m.v=l);try{if(s=2,r){if(u||(a="next"),n=r[a]){if(!(n=n.call(r,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,u<2&&(u=0)}else 1===u&&(n=r.return)&&n.call(r),u<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),u=1);r=e}else if((n=(c=m.n<0)?l:t.call(i,m))!==o)break}catch(n){r=e,u=1,l=n}finally{s=1}}return{value:n,done:c}}}(t,a,r),!0),s}var o={};function u(){}function l(){}function s(){}n=Object.getPrototypeOf;var d=[][i]?n(n([][i]())):(E(n={},i,(function(){return this})),n),c=s.prototype=u.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,E(e,a,"GeneratorFunction")),e.prototype=Object.create(c),e}return l.prototype=s,E(c,"constructor",s),E(s,"constructor",l),l.displayName="GeneratorFunction",E(s,a,"GeneratorFunction"),E(c),E(c,a,"Generator"),E(c,i,(function(){return this})),E(c,"toString",(function(){return"[object Generator]"})),(w=function(){return{w:r,m}})()}function E(e,n,t,i){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}E=function(e,n,t,i){function r(n,t){E(e,n,(function(e){return this._invoke(n,t,e)}))}n?a?a(e,n,{value:t,enumerable:!i,configurable:!i,writable:!i}):e[n]=t:(r("next",0),r("throw",1),r("return",2))},E(e,n,t,i)}function O(e,n){this.v=e,this.k=n}var F=[v.lT.IN_REVIEW,v.lT.CHANGES_REQUESTED,v.lT.OPEN],T=function(e){var n=e.post,t=e.submission,u=e.postActionCallback,y=(0,a.R)().value,h=!!n&&function(e,n){return n&&e.creator&&n.id===e.creator.id}(n,y),g=function(e){var n=(0,f.zF)(),t=(0,c.$L)(),i=(0,m.jI)(),a=(0,d.n)(k),r=(0,s.A)(a,2),o=r[0],u=r[1].loading,p=(null==e?void 0:e.collection)||(null==e?void 0:e.pendingCollection),y="withdrawn",h="withdrawing";null!=e&&e.pendingCollection&&(y="removed",h="removing");var g=function(){n({message:"There was an error ".concat(h," the story from ").concat((null==p?void 0:p.name)||"this publication",". Please try again later."),toastStyle:"ERROR"})},N=function(){var a=(0,l.A)(b().mark((function a(){return b().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(p){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,o({variables:{input:{postPublicationTuple:{postId:e.id,publicationId:null==p?void 0:p.id},status:v.lT.CANCELLED}},onCompleted:function(){n({message:"You have ".concat(y," your story from ").concat(p.name||"this publication")})},onError:function(){g()}});case 5:t.event("submission.postWithdrawn",{source:i,postId:e.id,collectionId:p.id}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(2),g();case 11:case"end":return a.stop()}}),a,null,[[2,8]])})));return function(){return a.apply(this,arguments)}}();return{collection:p,handler:N,loading:u,isPending:!(null==e||!e.pendingCollection)}}(n),N=g.collection,S=g.handler,w=g.loading,E=g.isPending,O=function(e){var n=(0,f.zF)(),t="withdrawn",i="withdrawing";(null==e?void 0:e.status)===v.lT.ACCEPTED&&(t="removed",i="removing");var a=function(){n({message:"There was an error ".concat(i," the story. Please try again later."),toastStyle:"ERROR"})},r=(0,d.n)(p,{update:function(e,n){var t,i;if("PublicationSubmission"===(null===(t=n.data)||void 0===t||null===(i=t.updateSubmissionStatus)||void 0===i?void 0:i.__typename)){var a=n.data.updateSubmissionStatus;e.modify({id:e.identify({__typename:"PublicationSubmission",id:a.id}),fields:{status:function(){return a.status}}})}}}),o=(0,s.A)(r,2),u=o[0],c=o[1].loading,m=function(){var i=(0,l.A)(b().mark((function i(){var r;return b().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=2;break}return i.abrupt("return");case 2:return r=e.publication.name,i.prev=3,i.next=6,u({variables:{submissionId:e.id},onCompleted:function(){n({message:"You have ".concat(t," your story from ").concat(r)})},onError:function(){a()}});case 6:i.next=11;break;case 8:i.prev=8,i.t0=i.catch(3),a();case 11:case"end":return i.stop()}}),i,null,[[3,8]])})));return function(){return i.apply(this,arguments)}}();return{shouldUseWithdrawViaSubmission:!!e,handler:m,loading:c,isPending:!!e&&F.includes(e.status)}}(t),T=O.shouldUseWithdrawViaSubmission,A=O.handler,D=O.loading,P=O.isPending,_="Removing...",I="Remove from publication";if((E||P)&&(_="Withdrawing...",I="Withdraw submission"),!(y&&h&&N||t))return null;var C=w||D;return i.createElement(r.q3,null,i.createElement(o.N,{onClick:function(){T?A():S(),u&&u()}},C?_:I))}},1722:(e,n,t)=>{t.d(n,{h:()=>r});var i=t(95964),a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostViewerEdgeQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"readingList"}},{kind:"Field",name:{kind:"Name",value:"shareKey"}},{kind:"Field",name:{kind:"Name",value:"creatorPartnerProgramEnrollmentStatus"}}]}}]}}]}}]}}]},r=function(e){var n,t=(0,i.IT)(a,{variables:{postId:(null==e?void 0:e.id)||""},ssr:!1,skip:!(null!=e&&e.id)}),r=t.loading,o=t.error,u=t.data;return r?{loading:r}:o?{error:o}:{viewerEdge:null==u||null===(n=u.post)||void 0===n?void 0:n.viewerEdge}}},55981:(e,n,t)=>{t.d(n,{n:()=>u});var i=t(96540),a=t(44402),r=t(1417),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"24px",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"24px";return function(t){return{width:e,height:n,"& path":{fill:t.colorTokens.foreground.error.primary.base}}}},u=function(e){var n=e.width,t=e.height,u=(0,a.l)();return i.createElement(r.A,{className:u(o(n,t))})}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/3371.bd59c539.chunk.js.map