---
format:
  revealjs:
    css: custom.css
    transition: none
    aspect-ratio: "16:9"
---

## ECON 0150 | Economic Data Analysis {.center}
<p class="subheader-center">The economist's data analysis skillset.</p>

<br> 

### *Part 2.1 | Relationships Between Numerical Variables*

---

## Bivariate Relationships
<p class="subheader">Let's summarize what we know about four datasets.</p>

---

## Bivariate Relationships
<p class="subheader">Let's summarize what we know about four datasets.</p>

![](i/a_01.png)

. . .

*> same means, same standard deviations, same correlation between x and y...*

. . .

*> are these datasets the same?*

---

## Bivariate Relationships
<p class="subheader">Are these the same datasets?</p>

. . .

<br><br><br>

Lets take a look at the data in a Notebook!

. . .


```{.python}
# Visualize all four datasets
sns.relplot(anscombe, x='x', y='y', col='dataset')
```

---

## Bivariate Relationships
<p class="subheader">Are these the same datasets?</p>

![](i/a_02.png)

. . .

*> very different! summarizing variables isn't enough*

---

## Bivariate Relationships
<p class="subheader">Summary statistics can hide important patterns</p>

<br><br>

::: {.incremental}
- The same mean, variance, and correlation can describe **very different** data
- **Visualizing relationships** between variables allows us a clearer understanding
- Part 2 is about exploring relationships in this way
:::

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Q. Is there a relationship between GDP and coffee production?</p>

![](i/c_01.png)

. . .

*> maybe, but it's hard to see*

. . .

*> lets use a two dimensional graph*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Q. Is there a relationship between GDP and coffee production?</p>

![](i/c_02.png)

. . .

*> two dimensions is nice, but the points have no meaningful relationships*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Q. Is there a relationship between GDP and coffee production?</p>

![](i/c_03.png)

. . .

*> a scatterplot effectively visualizes scross sectional data with two dimensions*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which countries have a GDP above $2 trillion?</p>

![](i/c_03.png)

. . .

*> look at the horizontal axis and select all that are greater than 2*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which countries have a GDP above $2 trillion?</p>

![](i/c_04.png)

*> look at the horizontal axis and select all that are greater than 2*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which countries have a production above ½ billion kg?</p>

![](i/c_03.png)

*> and we can use either axis*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which countries have a production above ½ billion kg?</p>

![](i/c_05.png)

*> and we can use either axis*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which countries produce less coffee per dollar than Brazil?</p>

![](i/c_03.png)

*> we can also compare BETWEEN data points*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which countries produce less coffee per dollar than Brazil?</p>

![](i/c_06.png)

*> we can also compare BETWEEN data points*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which countries produce less coffee per dollar than Brazil?</p>

![](i/c_07.png)

*> separating lines can help make comparisons between ratios*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which countries produce less coffee per dollar than Brazil?</p>

![](i/c_08.png)

*> separating lines can help make comparisons between ratios*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which countries produce more coffee per dollar than Brazil?</p>

![](i/c_07.png)

*> separating lines can help make comparisons between ratios*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which countries produce more coffee per dollar than Brazil?</p>

![](i/c_09.png)

*> separating lines can help make comparisons between ratios*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Do the GDPs of the upper or lower pair differ by a larger amount?</p>

![](i/c_10.png)

. . .

*> use the differences on the horizontal axis to measure differences*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which is larger: the ratio of GDPs of the upper or lower pair?</p>

![](i/c_10.png)

. . .

*> this question is difficult to answer with this scale*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which is larger: the ratio of GDPs of the upper or lower pair?</p>

![](i/c_11.png)

*> a log scale makes RATIOS easier to visualize: each tick is 10x larger*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which country produces the second highest output of coffee?</p>

![](i/c_11.png)

*> a log scale also makes it easier to see SCALING*

---

## Bivariate Relationships in Cross-Section
<p class="subheader">Which country produces the second highest output of coffee?</p>

![](i/c_12.png)

. . .

*> scaling the vertical axis in logs clarifies both small and large variation*

---

## Adding More Variables
<p class="subheader">So far we've encoded two variables using position</p>

<br>

::: {.incremental}
- **x-position** → GDP
- **y-position** → Coffee Production
- What if we want to show a **third variable**?
:::

---

## Trivariate Relationships: Size
<p class="subheader">We can use SIZE to encode a third numerical variable</p>

![](i/e_01.png)

*> our standard scatterplot with position encoding*

---

## Trivariate Relationships: Size
<p class="subheader">Each point's SIZE now represents population</p>

![](i/e_02.png)

. . .

*> larger bubbles = larger population*

---

## Trivariate Relationships: Size
<p class="subheader">Indonesia and Brazil stand out — large countries with high production</p>

![](i/e_03.png)

. . .

*> we can now see three variables at once: GDP, production, AND population*

---

## Trivariate Relationships: Color
<p class="subheader">We can also use COLOR to encode a third numerical variable</p>

<br>

::: {.incremental}
- A **continuous color scale** maps values to shades
- Lighter → lower values, Darker → higher values
- Works well when size would be hard to compare
:::

---

## Trivariate Relationships: Color
<p class="subheader">Each point's COLOR now represents population</p>

![](i/e_07.png)

. . .

*> darker points = larger population*

---

## Trivariate Relationships: Color
<p class="subheader">Color makes it easy to spot high-population countries</p>

![](i/e_08.png)

. . .

*> Brazil, Indonesia, and Ethiopia stand out as darker points*

---

## Summary

<br><br>

::: {.incremental}
- **Scatterplots** show relationships between two numerical variables
- **Log scales** help compare ratios and see variation across orders of magnitude
- **Size encoding** adds a third numerical variable (bubble charts)
- **Color encoding** adds a third numerical variable (continuous color scale)
:::

---

## Exercise 2.1 | Cross-Sectional Scatterplots
<p class="subheader">Visualizing GDP and Coffee Production Relationships</p>

![](i/c_13.png)


Was the relationship between coffee production and GDP different in 1980?

- **Data:** `Beans_GDP_1980.csv`

---

## Exercise 2.1 | Cross-Sectional Scatterplots
<p class="subheader">How does GDP relate to coffee production?</p>

```{.python}
# Log both x and y variables
gdp['log_GDP'] = np.log(gdp['GDP'])
gdp['log_prod'] = np.log(gdp['coffee_prod'])
```

. . .

```{.python}
# Plot the log variables
sns.scatterplot(gdp, x='log_GDP', y='log_prod')
```

---

## Exercise 2.1 | Log Transformation
<p class="subheader">Alternative: use log scale without transforming</p>

```{.python}
# Use a log scale without transforming the variable
sns.scatterplot(gdp, x='GDP', y='coffee_prod')
plt.xscale('log')
plt.yscale('log')
```

---

## Exercise 2.1 | Cross-Sectional Scatterplots
<p class="subheader">How does GDP relate to coffee production?</p>

```{.python}
# Encode population size as bubble size
sns.scatterplot(gdp, x='GDP', y='coffee_prod', size='population', sizes=(10,200))
```

---

## Exercise 2.1 | Cross-Sectional Scatterplots
<p class="subheader">How does GDP relate to coffee production?</p>

```{.python}
# Encode population size as color
sns.scatterplot(gdp, x='GDP', y='coffee_prod', hue='population')
```

---

## Bivariate Relationships: Timeseries
<p class="subheader">How do the two commodity prices relate to each other?</p>

![](i/c_18.png)

. . .

*> difficult to tell because of the axis scale*

---

## Bivariate Relationships: Timeseries
<p class="subheader">How do the two commodity prices relate to each other?</p>

![](i/c_19.png)

---

## Bivariate Relationships: Timeseries
<p class="subheader">In which years did oil and coffee prices move in **opposite** directions?</p>

![](i/c_19.png)

---

## Bivariate Relationships: Timeseries
<p class="subheader">In which years did oil and coffee prices move in **opposite** directions?</p>

![](i/c_20.png)

---

## Bivariate Relationships: Timeseries
<p class="subheader">But are the two prices positively or negatively related to each other?</p>

![](i/c_20.png)

. . .

*> this is difficult to see with just a Multi-Lineplot...*

---

## Bivariate Relationships: Timeseries
<p class="subheader">But are the two prices positively or negatively related to each other?</p>

![](i/c_21.png)

. . .

*> a Scatterplot can show the relationship between two variables through time*

---

## Bivariate Relationships: Timeseries
<p class="subheader">Does the price of oil determine the price of coffee?</p>

![](i/c_21.png)

. . .

*> a Scatterplot can only show associations not causation* :(

---

## Exercise 2.1 | Timeseries Scatterplots
<p class="subheader">Visualizing Coffee Prices and Oil Prices</p>

We’re going to use a scatterplot to visually examine the relationship between coffee prices and oil prices.

- **Data:** `Coffee_Oil.csv`

---

## Exercise 2.1 | Timeseries Scatterplots
<p class="subheader">Visualizing Coffee Prices and Oil Prices</p>

```{.python}
# Scatterplot
sns.scatterplot(prices, x='Coffee', y='Oil')
```
