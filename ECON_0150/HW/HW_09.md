I'll revise the homework with a focus on two-sample t-tests using regression and residual diagnostics with continuous predictors:

# ECON 0150 | Spring 2025 | Homework 09

### Due: Sunday, March 23, 5PM

Homework is designed to both test your knowledge and challenge you to apply familiar concepts in new applications. Answer clearly and completely. You are welcomed and encouraged to work in groups so long as your work is your own. Use the provided datasets to answer the following questions. Then submit your figures and answers to Gradescope.

1. An environmental researcher is comparing air temperatures in urban neighborhoods with different amounts of green space. The data below shows temperatures (in 째C) measured at the same time of day in neighborhoods classified as having low or high green space:

```python
low_green = [22.3, 21.9, 23.1, 22.5, 23.0, 21.8, 22.7, 23.2, 22.1, 23.4,
             22.8, 21.7, 22.9, 22.4, 23.3, 22.0, 22.6, 23.5, 21.6, 22.2]
             
high_green = [19.8, 18.9, 20.2, 19.5, 19.1, 20.5, 19.7, 20.1, 19.3, 20.3,
              19.4, 20.4, 19.2, 20.0, 19.6, 18.8, 20.6, 19.9, 20.7, 19.0]
```

a) Calculate the mean temperature for each group. What is the difference in means between neighborhoods with low green space and those with high green space?

b) Perform a two-sample t-test to determine if the temperature difference between the neighborhood types is statistically significant. Report the t-statistic and p-value.

```python
# Example code
from scipy import stats
t_stat, p_value = stats.ttest_ind(low_green, high_green, equal_var=True)
```

c) Now create a binary indicator variable for green space (e.g., high_green = 1, low_green = 0) and use regression to test for a temperature difference:

```python
# Create combined dataset with indicator
import numpy as np
import pandas as pd
import statsmodels.api as sm

# Combine the data
temperatures = low_green + high_green
green_indicator = [0] * len(low_green) + [1] * len(high_green)

# Create DataFrame
data = pd.DataFrame({
    'temperature': temperatures,
    'high_green': green_indicator
})

# Run regression
X = sm.add_constant(data['high_green'])
model = sm.OLS(data['temperature'], X).fit()
print(model.summary().tables[1])
```

d) Compare the results from the t-test and regression approaches. How do the t-statistics and p-values relate to each other? Explain the meaning of the regression coefficients (intercept and slope) in terms of the group means.

e) Create a box plot and/or scatter plot that effectively visualizes this comparison.



2. A climate scientist is studying the relationship between latitude and average annual temperature for cities across North America. The data is available in the file `climate_data.csv` and includes:

- City name
- Latitude (degrees north of the equator)
- Average annual temperature (째C)

a) Create a scatter plot of temperature versus latitude. Describe the apparent relationship.

b) Fit a linear regression model to predict temperature based on latitude:

```python
import statsmodels.api as sm

# Add a constant (intercept) to the model
X = sm.add_constant(climate_data['latitude'])

# Fit the model
model = sm.OLS(climate_data['temperature'], X).fit()

# Print summary statistics
print(model.summary().tables[1])
```

c) Interpret the intercept and slope coefficients. What does each one represent in the context of this problem?

d) Check the residuals of your regression model:

```python
# Get predicted values and residuals
climate_data['predicted'] = model.predict()
climate_data['residuals'] = model.resid

# Plot residuals vs. fitted values
plt.figure(figsize=(10, 6))
plt.scatter(climate_data['predicted'], climate_data['residuals'])
plt.axhline(y=0, color='r', linestyle='-')
plt.xlabel('Predicted Temperatures (째C)')
plt.ylabel('Residuals (째C)')
plt.title('Residuals vs. Fitted Values')
```

e) Based on the residual plot, identify any potential violations of regression assumptions. Do you see evidence of:

- Non-linearity?
- Heteroskedasticity (non-constant variance)?
- Outliers?

f) Create a histogram of the residuals. Do they appear to be normally distributed?

g) How might violations of these assumptions affect the reliability of your regression results? What adjustments or alternative approaches could you consider?

## Part 4: Critical Thinking on Regression Assumptions

1. Consider the following regression output examining how income affects consumer spending on luxury goods:

```
                                 OLS Regression Results                               
=====================================================================================
Dep. Variable:           luxury_spending   R-squared:                       0.487
Model:                            OLS      Adj. R-squared:                  0.482
Method:                 Least Squares      F-statistic:                     85.25
No. Observations:                  90      Prob (F-statistic):           3.74e-14
Df Residuals:                      88      Log-Likelihood:                -379.21
Df Model:                           1      AIC:                             762.4
=====================================================================================
                  coef    std err          t      P>|t|      [0.025      0.975]
-------------------------------------------------------------------------------------
const          -523.65     207.83     -2.519      0.140     -936.51     -110.79
income           0.047      0.005      9.233      0.000       0.037       0.057
=====================================================================================
```

And the following residual plot:

![Residual Plot]

a) Interpret the coefficient on income. What does it tell us about consumer behavior?

b) Based on the residual plot (to be provided), identify any potential violations of regression assumptions. How might these violations affect our interpretation of the model?

c) If you observe heteroskedasticity (non-constant variance) in the residuals, explain why this might occur in the context of income and luxury spending. Would you consider this to be a serious problem for this particular analysis? Why or why not?

d) Suggest at least two modifications that could improve this regression model, considering both statistical issues and economic theory.

e) Discuss the importance of careful model specification in economic analysis. How can violations of regression assumptions lead to misleading conclusions in policy contexts?